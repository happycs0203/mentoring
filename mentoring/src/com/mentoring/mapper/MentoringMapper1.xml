<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="MentoringMapper1">

	<insert id="insertMentoring" parameterType="project">
		INSERT INTO projectmento
		VALUES(seq_project_num.nextval,#{uId}, 'mentoring', #{pTitle}, #{pPlace}, 1000, 5, 10, #{pContent},
		#{pTime}, '2017/05/10', 'N', #{pIntroduce})
	</insert>
	<!-- # : PreparedStateMent형식, $ : Statement형식 -->

	<insert id="insertImage" parameterType="image">
		<selectKey keyColumn='p_num' keyProperty='pNum' order='BEFORE'
			resultType='int'>
			SELECT seq_project_num.nextval FROM dual
		</selectKey>

		INSERT INTO imagemento
		VALUES(seq_image_num.nextval,#{pNum} , #{iTitle}, #{iPath}, #{iSize})
	</insert>

	<select id="showMentoringView" parameterType="hashmap"
		resultType="project" resultMap="commentMap">
		select *
		from projectmento
		<where>
			<if test="commentNo != null">
				p_num = #{pNum}
			</if>
		</where>
	</select>
	
	<select id="showMentoringImage" parameterType="hashmap"
		resultType="image" resultMap="commentMap">
		select *
		from imagementoS
		<where>
			<if test="commentNo != null">
				i_num = #{iNum}
			</if>
		</where>
	</select>
	<!-- # : PreparedStateMent형식, $ : Statement형식 -->



</mapper>