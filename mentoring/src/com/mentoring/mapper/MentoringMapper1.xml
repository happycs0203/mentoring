<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="MentoringMapper1">

<resultMap type="com.mentoring.model.Project" id="mentoringinfoMap">
	<result column="p_num" 	property="pNum"/>
	<result column="p_place" 	property="pPlace"/>
	<result column="p_title" 	property="pTitle"/>
	<result column="p_uid" 	property="pUid"/>
	<result column="p_content" 	property="pContent"/>
	<result column="p_time" 	property="pTime"/>
	<result column="p_minmem" 	property="pMinmem"/>
	<result column="p_maxmem" 	property="pMaxmem"/>
</resultMap>

<resultMap type="com.mentoring.model.Image" id="imageMap">
	<result column="i_num" 	property="iNum"/>
	<result column="i_path" 	property="iPath"/>
	
</resultMap>

	<insert id="insertMentoring" parameterType="project">
		INSERT INTO projectmento
		VALUES(seq_project_num.nextval,#{uId}, 'mentoring', #{pTitle}, #{pPlace}, 1000, 5, 10, #{pContent},
		#{pTime}, '2017/05/10', 'N', #{pIntroduce})
	</insert>
	<!-- # : PreparedStateMent형식, $ : Statement형식 -->

	<insert id="insertImage" parameterType="image">
		<selectKey keyColumn='p_num' keyProperty='pNum' order='BEFORE'
			resultType='int'>
			SELECT seq_project_num.nextval FROM dual
		</selectKey>

		INSERT INTO imagemento
		VALUES(seq_image_num.nextval,#{pNum} , #{iTitle}, #{iPath}, #{iSize})
	</insert>

	<select id="showMentoringView" parameterType="hashmap"
		resultType="project" resultMap="mentoringinfoMap">
		select *
		from projectmento
		<where>
			<if test="pNum != null">
				p_num = #{pNum}
			</if>
		</where>
	</select>
	
	<select id="showMentoringImage" parameterType="hashmap"
		resultType="image" resultMap="imageMap">
		select *
		from imagemento
		<where>
			<if test="iNum != null">
				i_num = #{iNum}
			</if>
		</where>
	</select>
	<!-- # : PreparedStateMent형식, $ : Statement형식 -->



</mapper>